<%= form_for(@questionnaire) do |f| %>
    <% if @questionnaire.errors.any? %>
	<div id="error_explanation">
	    <h2><%= pluralize(@questionnaire.errors.count, "error") %> prohibited this questionnaire from being saved:</h2>

	    <ul>
		<% @questionnaire.errors.full_messages.each do |message| %>
		    <li><%= message %></li>
		<% end %>
	    </ul>
	</div>
    <% end %>

    <div class="field">
	<%= f.label :name %><br>
	<%= f.text_field :name %>
    </div>

    <br>
    <%= f.fields_for :questions do |builder| %>
	<%= render 'question_fields', f: builder %>
    <% end %>

    <%= link_to_add_fields "Add new question", f, :questions %>

    <div class="actions">
	<%= f.submit %>
    </div>

<% end %>
